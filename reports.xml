<?xml version="1.0"?>
<openerp>
	<data>
		<report 
			id="contract_abakus_signable"
			string="Contract Signable"
			model="account.analytic.account" 
			report_type="qweb-pdf"
			file="contract_sale_signable" 
			name="contract_sale_signable.signable_contract"
		/>
       
		<template id="signable_contract_document">
			<t t-name="contract_sale_signable.signable_contract_document">
				<t t-call="report.external_layout">
					<div class="page">
						<style type="text/css">
								.abakusBordered {
									border: 2px #F68B19 solid;
									background-color: #F9F9F9;
								}

								.abakusBackground {
									background-color: #F68B19;
									color: #F9F9F9;
								}
						</style>

						<h1 class="text-center abakusBordered">Contrat de services informatiques</h1>

						<!-- Schedules and travel costs -->
						<h2>Tarifs horaires et déplacements</h2>

						<table class="table abakusBordered">
							<tr>
                                <th>Nom</th>
								<th>Tarif horaire</th>
								<th>Minimum par année</th>
								<th>Facture d'acompte minimum par mois</th>
								<th>SLA</th>
							</tr>
                            <t t-foreach="o.get_contract_type_products()" t-as="product">
                                <tr>
                                    <td><span t-esc="product['name']"/></td>
                                    <td><span t-esc="product['price']"/></td>
                                    <td>?</td>
                                    <td>?</td>
                                    <td>?</td>
                                </tr>
                            </t>      
						</table>
                        
                        <table class="table abakusBordered">
							<tr>
                                <th>Nom</th>
								<th>Tarif horaire</th>
						    </tr>
                            <t t-foreach="o.get_travel_products()" t-as="product">
                                <tr>
                                    <td><span t-esc="product['name']"/></td>
                                    <td><span t-esc="product['price']"/></td>
                                </tr>
                            </t>      
						</table>

						<h2>Unités de facturation et temps de réaction (unité = 1 heure)</h2>

						<table class="table abakusBordered">
							<tr>
								<th>Nom</th>
                                <th>Priorité</th>
                                <th>État</th>
                                <th>Type de service</th>
                                <th>Type de temps</th>
                                <th>Temps de réaction (min)</th>
                                
							</tr>
							<t t-foreach="o.contract_type.sla_id.sla_rule_ids" t-as="rule">
                                <tr>
                                    <td><span t-field="rule.issue_priority" /></td>
                                    <td><span t-field="rule.issue_priority" /></td>
                                    <td><span t-field="rule.issue_stage" /></td>
                                    <td><span t-field="rule.service_type" /></td>
                                    <td><span t-field="rule.time_type" /></td>
                                    <td><span t-field="rule.action_time" /></td>
                                </tr>
                            </t>    
						</table>
                        
                        <ul>
                            <li>Ticket: Demande de support</li>
                            <li>SD : Service desk accessible via tél +32 84 59 35 58 ou par email à l'adresse support@abakusitsolutions.eu</li>
                            <li>OS : "On-Site" prestation sur site du client (sur rendez-vous)</li>
                            <li>SLA : Service Level Agreement seulement en combinaison avec une Baseline (explication Baseline voir page 2)...</li>
                            <li>min : Temps minimum facturé</li>
                            <li>NBD : Next Business Day</li>
                            <li>Urgent : Une demande orale suffit</li>
                            <li>En dehors des heures de bureau : seulement pour des clients avec convention SLA ou sur rendez-vous. Sauf convention écrite contraire, le tarif en vigueur sera majoré de 150% et de 200% à partir de 22:00 ou le dimanche.</li>
                            <li>Temps de réaction (compliance: 85%) : 
                                <ul>
                                    <li>SD : réaction par email ou téléphone</li>
                                    <li>OD : technicien présent sur site</li>
                                </ul>
                                Les cnventions sur les temps ne valent que pour des clients avec SLA.
                            </li>
                            <li>Heures de bureau : lundi au vendredi de 8h30 à 17h30</li>
                        </ul>

						<h2>Accord (du <span t-field="o.create_date" />)</h2>
                        
						<p>
							Tarif horaire : <span t-field="o.timesheet_product_price" /> - 	Déplacement : <span t-field="o.on_site_product.lst_price" /> - Date de mise en service : <span t-field="o.date_start" /> <br />
							Facture d'acompte <span t-field="o.recurring_invoice_line_ids[0].price_subtotal" /> chaque <span t-field="o.recurring_interval" /> <span t-field="o.recurring_rule_type" /> - Baseline jusqu'au <span t-field="o.date" /> : XXX € <br />
							SLA : OUI / NON - Maintenance préventive : OUI / NON - Renouvellement automatique des licences : OUI / NON <br />
						</p>
                        
						<!-- SIGN BOX -->
						<table class="table">
							<!-- Partners names -->
							<tr>
								<th><span t-field="o.partner_id" /></th> <!-- customer -->
								<th><span t-field="o.company_id" /></th> <!-- company -->
							</tr>
							<!-- Partners address -->
							<tr>
								<td>
                                    <address t-field="o.partner_id" t-field-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
								</td>
								<td>
                                    <address t-field="o.company_id.partner_id" t-field-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
								</td>
							</tr>
							<!-- Signatures -->
							<tr>
                                <td>
                                    <br/>
                                    <br/>
                                    <br/>
                                </td>
								<td>
								</td>
                            </tr>
							<!-- Names -->
							<tr>
								<td>
                                    <br/>
								</td>
								<td>
								</td>
							</tr>
						</table>
						Nos conditions générales et les conditions particulières reprises en annexe, sont bien connues du client. Tous les prix s'entendent hors TVA.
					</div>
				</t>
			</t>
		</template>
       
		<template id="signable_contract">
            <t t-call="report.html_container">
                <t t-foreach="doc_ids" t-as="doc_id">
                    <t t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'contract_sale_signable.signable_contract_document')"/>
                </t>
            </t>
        </template>
	</data>
</openerp>
